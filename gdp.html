<html>
<head>
	<style type="text/css">
		div#information {position:absolute; bottom:5px; left:5px; width:200px; z-index: 100; background-color: orangered; padding:10px; font-family: sans-serif;}
		div#controls {position:absolute; top:0px; left:5px; height:20px; z-index: 100; padding:10px; font-family: sans-serif;}
		div#chartDiv {position:absolute; top:20px; left:5px;}
		div#infoX {float:right; padding:2px; cursor:pointer;}
		select {min-width: 100px;}
	</style>
</head>
<body>
	<div id='controls'>Size By: <select id='sizeBy' onchange='redrawChart()'></select> &nbsp;Color By: <select id='colorBy' onchange='redrawChart()'></select></div>
	<div id='chartDiv'></div>
	<div id='information'><div id='infoX' onclick='body.removeChild(document.getElementById("information"))'>✖</div> Industries in America (2010) sized by value added and colored by number of employees. Value added is roughly the sum of wages, taxes and profit for all firms in a given industry. <br><br> Left click to zoom in on headings. Right click to zoom out. <br><br> The data comes from the <a href='http://www.bea.gov/industry/gdpbyind_data.htm'>US BEA.</a></div>
	<script type='text/javascript' src='https://www.google.com/jsapi'></script>
	<script type='text/javascript'>
		document.getElementById('chartDiv').style.width = document.width - 20
		document.getElementById('chartDiv').style.height = document.height - 20
		google.load('visualization', '1', {packages:['treemap']});
		google.setOnLoadCallback(drawChart);
		function drawChart() {
			// Create and populate the data table.
			data = google.visualization.arrayToDataTable([
				['Industry', 'Parent', 'Value Added (%GDP)', 'Employment','Energy Input ($)','Materials Input ($)','Services Input ($)'],
				['Gross Domestic Product', null, 100, 120921, 520925, 4285283, 6478628],
				['Agriculture, forestry, fishing, and hunting', 'Gross Domestic Product', 1.1, 1096, 28282, 133227, 52590],
				['Farms', 'Agriculture, forestry, fishing, and hunting', 0.9, 655, 27047, 126282, 45014],
				['Forestry, fishing, and related activities', 'Agriculture, forestry, fishing, and hunting', 0.2, 441, 1236, 6944, 7576],
				['Mining', 'Gross Domestic Product', 1.6, 641, 14944, 90376, 78940],
				['Oil and gas extraction', 'Mining', 1, 157, 6595, 37755, 41133],
				['Mining, except oil and gas', 'Mining', 0.3, 202, 5225, 21033, 10333],
				['Support activities for mining', 'Mining', 0.3, 282, 3124, 31588, 27474],
				['Utilities', 'Gross Domestic Product', 1.8, 546, 25474, 55660, 20674],
				['Construction', 'Gross Domestic Product', 3.5, 5486, 38848, 333596, 104863],
				['Manufacturing', 'Gross Domestic Product', 11.7, 11235, 94406, 2445424, 590774],
				['Durable goods', 'Manufacturing', 6.3, 6908, 36873, 965275, 333439],
				['Wood products', 'Durable goods', 0.2, 334, 1997, 32532, 9685],
				['Nonmetallic mineral products', 'Durable goods', 0.2, 357, 6125, 34426, 14488],
				['Primary metals', 'Durable goods', 0.3, 353, 14753, 130728, 29664],
				['Fabricated metal products', 'Durable goods', 0.8, 1250, 3816, 105558, 46888],
				['Machinery', 'Durable goods', 1, 976, 2140, 121617, 43419],
				['Computer and electronic products', 'Durable goods', 1.8, 1079, 1068, 67654, 43477],
				['Electrical equipment, appliances, and components', 'Durable goods', 0.3, 351, 939, 51949, 16581],
				['Motor vehicles, bodies and trailers, and parts', 'Durable goods', 0.4, 670, 3074, 261533, 40881],
				['Other transportation equipment', 'Durable goods', 0.5, 644, 1714, 99446, 55638],
				['Furniture and related products', 'Durable goods', 0.2, 346, 462, 20112, 8824],
				['Miscellaneous manufacturing', 'Durable goods', 0.6, 549, 786, 39720, 23894],
				['Nondurable goods', 'Manufacturing', 5.4, 4327, 57533, 1480149, 257335],
				['Food and beverage and tobacco products', 'Nondurable goods', 1.4, 1562, 16893, 494112, 83473],
				['Textile mills and textile product mills', 'Nondurable goods', 0.1, 230, 1320, 27913, 5384],
				['Apparel and leather and allied products', 'Nondurable goods', 0.1, 178, 199, 3947, 2287],
				['Paper products', 'Nondurable goods', 0.4, 382, 10980, 82239, 19527],
				['Printing and related support activities', 'Nondurable goods', 0.2, 476, 1409, 33845, 20905],
				['Petroleum and coal products', 'Nondurable goods', 1.2, 109, 2889, 464076, 5521],
				['Chemical products', 'Nondurable goods', 1.6, 775, 20531, 289523, 96950],
				['Plastics and rubber products', 'Nondurable goods', 0.5, 615, 3312, 84493, 23290],
				['Wholesale trade', 'Gross Domestic Product', 5.5, 5304, 10017, 81779, 342789],
				['Retail trade', 'Gross Domestic Product', 6.1, 12561, 14826, 102942, 332896],
				['Transportation and warehousing', 'Gross Domestic Product', 2.8, 3976, 126507, 34126, 212725],
				['Air transportation', 'Transportation and warehousing', 0.4, 425, 35940, 1909, 47094],
				['Rail transportation', 'Transportation and warehousing', 0.2, 177, 8959, 8359, 26458],
				['Water transportation', 'Transportation and warehousing', 0.1, 60, 9421, 1189, 10595],
				['Truck transportation', 'Transportation and warehousing', 0.8, 1225, 46351, 13381, 76488],
				['Transit and ground passenger transportation', 'Transportation and warehousing', 0.2, 416, 2613, 2110, 1747],
				['Pipeline transportation', 'Transportation and warehousing', 0.1, 40, 808, 1438, 7390],
				['Other transportation and support activities', 'Transportation and warehousing', 0.6, 1039, 20952, 3894, 30697],
				['Warehousing and storage', 'Transportation and warehousing', 0.3, 594, 1463, 1845, 12255],
				['Information', 'Gross Domestic Product', 4.3, 2521, 7773, 73748, 500706],
				['Publishing industries (includes software)', 'Information', 1, 753, 1202, 22043, 151020],
				['Motion picture and sound recording industries', 'Information', 0.4, 310, 614, 4643, 38385],
				['Broadcasting and telecommunications', 'Information', 2.4, 1168, 5217, 38147, 254164],
				['Information and data processing services', 'Information', 0.5, 290, 740, 8914, 57138],
				['Finance, insurance, real estate, rental, and leasing', 'Gross Domestic Product', 20.7, 7356, 17387, 99313, 1736569],
				['Finance and insurance', 'Finance, insurance, real estate, rental, and leasing', 8.5, 5527, 5828, 24379, 1060424],
				['Federal Reserve banks, credit intermediation, and related activities', 'Finance and insurance', 4, 2476, 3441, 7947, 431541],
				['Securities, commodity contracts, and investments', 'Finance and insurance', 1.4, 774, 1897, 8654, 350415],
				['Insurance carriers and related activities', 'Finance and insurance', 2.8, 2195, 448, 7689, 211416],
				['Funds, trusts, and other financial vehicles', 'Finance and insurance', 0.3, 82, 41, 88, 67051],
				['Real estate and rental and leasing', 'Finance, insurance, real estate, rental, and leasing', 12.2, 1829, 11559, 74935, 676145],
				['Real estate ', 'Real estate and rental and leasing', 10.8, 1341, 9325, 69370, 609446],
				['Rental and leasing services and lessors of intangible assets', 'Real estate and rental and leasing', 1.4, 488, 2235, 5564, 66699],
				['Professional and business services', 'Gross Domestic Product', 12.3, 15858, 35991, 91716, 682090],
				['Professional, scientific, and technical services', 'Professional and business services', 7.5, 7198, 5145, 49893, 384303],
				['Legal services', 'Professional, scientific, and technical services', 1.5, 1078, 438, 2731, 42368],
				['Computer systems design and related services', 'Professional, scientific, and technical services', 1.3, 1383, 754, 8485, 77519],
				['Miscellaneous professional, scientific, and technical services', 'Professional, scientific, and technical services', 4.8, 4737, 3953, 38676, 264416],
				['Management of companies and enterprises', 'Professional and business services', 1.8, 1790, 3252, 15341, 123883],
				['Administrative and waste management services', 'Professional and business services', 2.9, 6870, 27595, 26482, 173905],
				['Administrative and support services', 'Administrative and waste management services', 2.6, 6520, 26628, 18985, 141748],
				['Waste management and remediation services', 'Administrative and waste management services', 0.3, 350, 966, 7498, 32157],
				['Educational services, health care, and social assistance', 'Gross Domestic Product', 8.8, 17766, 19857, 193847, 529858],
				['Educational services', 'Educational services, health care, and social assistance', 1.1, 2853, 5957, 22298, 58160],
				['Health care and social assistance', 'Educational services, health care, and social assistance', 7.6, 14913, 13900, 171548, 471699],
				['Ambulatory health care services', 'Health care and social assistance', 3.8, 5387, 3664, 66051, 181657],
				['Hospitals and nursing and residential care facilities', 'Health care and social assistance', 3.2, 7214, 8847, 96444, 247486],
				['Social assistance', 'Health care and social assistance', 0.6, 2312, 1388, 9053, 42555],
				['Arts, entertainment, recreation, accommodation, and food services', 'Gross Domestic Product', 3.8, 10538, 24018, 165154, 251484],
				['Arts, entertainment, and recreation', 'Arts, entertainment, recreation, accommodation, and food services', 1, 1596, 3065, 12335, 71398],
				['Performing arts, spectator sports, museums, and related activities', 'Arts, entertainment, and recreation', 0.6, 446, 1156, 2861, 50754],
				['Amusements, gambling, and recreation industries', 'Arts, entertainment, and recreation', 0.4, 1150, 1909, 9474, 20645],
				['Accommodation and food services', 'Arts, entertainment, recreation, accommodation, and food services', 2.9, 8942, 20953, 152819, 180086],
				['Accommodation', 'Accommodation and food services', 0.8, 1561, 8991, 16765, 72898],
				['Food services and drinking places', 'Accommodation and food services', 2.1, 7381, 11962, 136054, 107188],
				['Other services, except government', 'Gross Domestic Product', 2.5, 5654, 4232, 30803, 164494],
				['Government', 'Gross Domestic Product', 13.6, 20382, 58363, 353572, 877176],
				['Federal', 'Government', 4.5, 4310, 21704, 90077, 396018],
				['General government', 'Federal', 4.1, 3690, 15854, 84603, 380595],
				['Government enterprises', 'Federal', 0.4, 620, 5850, 5474, 15423],
				['State and Local', 'Government', 9.1, 16072, 36660, 263494, 481158],
				['General state/local government', 'State and Local', 8.4, 14982, 9568, 225723, 388413],
				['Government state/local enterprises', 'State and Local', 0.7, 1090, 27092, 37771, 92746]
			])
			
			// Populate our selectors.
			labels = []
			for (i=2;i<data.getNumberOfColumns();i++) {
				for (j in arr=['sizeBy','colorBy']) {
					newOpt = document.createElement('option')
					newOpt.value = i
					newOpt.innerHTML = data.getColumnLabel(i)
					selector = document.getElementById(arr[j])
					selector.add(newOpt, null)
				}
			}
			// Set the proper selection for our first go-round.
			document.getElementById('colorBy').selectedIndex = 1

			// Try a subset of the data.
			view = new google.visualization.DataView(data)
			view.setColumns([0,1,2,3])
			// Or size by number of employees:
			// view.setColumns([0,1,2,3])

			// Create and draw the visualization.
			tree = new google.visualization.TreeMap(document.getElementById('chartDiv'));
			options = {
				minColor: '#B2C8D8',
				midColor: '#5586A9',
				maxColor: '#004A7F',
				fontSize: 10,
				headerHeight: 15,
				maxDepth: 3,
				fontColor: 'black',
				showScale: true
			}
			tree.draw(view, options);
		}
		function redrawChart() {
			sizyByIndex = parseInt(document.getElementById('sizeBy').value)
			colorByIndex = parseInt(document.getElementById('colorBy').value)
			view.setColumns([0,1,sizyByIndex,colorByIndex])
			tree.draw(view,options)
		}
	</script>
</body>
</html>
